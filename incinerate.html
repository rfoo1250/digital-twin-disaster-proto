<!DOCTYPE html>
<html lang="en">
<head>
  <!-- =================================================================
  HEAD: Contains metadata, fonts, stylesheets, and required libraries.
  ================================================================== -->
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Incinerate - Wildfire Sim Page</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Main Stylesheet (assumes it's in a parent directory) -->
  <link rel="stylesheet" href="./base.css">
  <link rel="stylesheet" href="./incinerate.css">
  
  <!-- D3.js and TopoJSON Libraries (Essential for the map) -->
  <script src="https://d3js.org/d3.v7.min.js" defer></script>
  <script src="https://d3js.org/topojson.v3.min.js" defer></script>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <!-- <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script> -->
</head>
<body>

  <!-- =================================================================
  HEADER: Provides consistent navigation across all pages.
  ================================================================== -->
  <header class="toolbar">
    <!-- <button class="menu-button" id="menu-toggle">☰</button> -->
    <!-- This is for a side drawer, not sure if we need it yet. -->
    <span class="toolbar-title">Digital Twin</span>
  </header>

  <!-- =================================================================
  MAIN CONTENT: Holds the primary visualization elements.
  ================================================================== -->
  <main id="viz">

    <!-- Map Container: The Map.js module will target this SVG element. -->
    <div class="left-panel">
      <svg id="map" class="chart" role="img"></svg>
      <div class="zoom-controls">
        <p id="zoom-label">Zoom</p>
        <button id="zoom_in">+</button>
        <button id="zoom_out">-</button>
      </div>
      <div id="county-selected-text-container">
        <p id="county_selected_text"></p>

      </div>
    </div>

    <div class="right-panel">
      <div class="grid-box">
        <div class="grid-section">
          <button id="focus_on_state">Focus on state</button>
          <button id="reset_focus">Reset focus from state</button>

          <div id="main-map-layer-dropdown" class="dropdown">
            <button id="main-map-layer-toggle-btn" class="dropdown-btn">Main Map Layers ▾</button>
            <div id="main-map-layer-menu" class="dropdown-content">
              <label><input type="checkbox" id="toggle-forest" checked> Forest Layer</label><br>
            </div>
          </div>
          
          <div id="wildfire-sim-layer-dropdown" class="dropdown">
            <button id="wildfire-sim-layer-toggle-btn" class="dropdown-btn">Wildfire Sim Layers ▾</button>
            <div id="wildfire-sim-layer-menu" class="dropdown-content">
              <label><input type="checkbox" id="toggle-background" checked> Background Map Layer</label><br>
            </div>
          </div>

          <!-- Wildfire Simulation Panel -->
          <section id="wildfire-sim-container">
            <h3>Wildfire Simulation</h3>
            <div id="wildfire-overlay">
              <div class="wildfire-map-layer"></div>  <!-- Leaflet map fits overlay -->
              <canvas id="wildfire-canvas"></canvas>  <!-- simulation overlay -->
            </div>
            <div id="wildfire-legend">
              <div><span style="display:inline-block;width:12px;height:12px;background:orange;margin-right:4px;"></span>Burning</div>
              <div><span style="display:inline-block;width:12px;height:12px;background:brown;margin-right:4px;"></span>Burnt</div>
              <div><span style="display:inline-block;width:12px;height:12px;background:green;margin-right:4px;"></span>Not burnt</div>
              <div><span style="display:inline-block;width:12px;height:12px;background:white;margin-right:4px;"></span>Empty</div>
            </div>
            <button id="run-wildfire-sim">Run Simulation</button>
          </section>
        </div>
      </div>
    </div>
  </main>

  <!-- =================================================================
  SHARED ELEMENTS & SCRIPT: Tooltip and the main application entry point.
  ================================================================== -->
  
  <!-- Tooltip Container: Essential for the map's hover functionality. -->
  <div id="tip" class="tooltip"></div>

  <!-- 
    Application Entry Point: 
    This single script loads your entire refactored application. 
    The Map.js module will automatically find the #map element and render into it.
  -->
  <script type="module" src="../js/app.js" defer></script>
  <script src="nav_control.js" defer></script>


</body>
</html>
